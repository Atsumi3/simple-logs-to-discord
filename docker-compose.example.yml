# Example: Game server with Discord notifications
version: "3.8"

services:
  gameserver:
    image: your-game-server:latest
    container_name: gameserver
    stdin_open: true
    tty: true
    ports:
      - "7777:7777"
    volumes:
      - ./data:/data
    restart: unless-stopped

  log-watcher:
    build: .
    # Or use: image: simple-logs-to-discord
    environment:
      - LOG_SOURCE=docker:gameserver
      - PATTERNS=["(?P<player>.+) has joined\\.", "(?P<player>.+) has left\\."]
      - DISCORD_WEBHOOK=${DISCORD_WEBHOOK}
      - MESSAGE_TEMPLATE=ðŸŽ® {line}
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
    depends_on:
      - gameserver
    restart: unless-stopped
